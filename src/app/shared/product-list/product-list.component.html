<div *ngFor="let product of products" class="col-12 col-md-6 col-lg-4">
    <div class="product-item">
        <div class="product-item__img">
            <button class="product-item__more-info" data-bs-toggle="modal" [attr.data-bs-target]="'#productModal--' + product.id" title="More Info">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_208_2)">
                        <circle cx="12" cy="12" r="11.5" stroke="#DD6031" />
                        <path
                            d="M16.5 12C16.5 11.1716 17.1716 10.5 18 10.5C18.8284 10.5 19.5 11.1716 19.5 12C19.5 12.8284 18.8284 13.5 18 13.5C17.1716 13.5 16.5 12.8284 16.5 12Z"
                            fill="#DD6031" />
                        <path
                            d="M10.5 12C10.5 11.1716 11.1716 10.5 12 10.5C12.8284 10.5 13.5 11.1716 13.5 12C13.5 12.8284 12.8284 13.5 12 13.5C11.1716 13.5 10.5 12.8284 10.5 12Z"
                            fill="#DD6031" />
                        <path
                            d="M4.5 12C4.5 11.1716 5.17157 10.5 6 10.5C6.82843 10.5 7.5 11.1716 7.5 12C7.5 12.8284 6.82843 13.5 6 13.5C5.17157 13.5 4.5 12.8284 4.5 12Z"
                            fill="#DD6031" />
                    </g>
                    <defs>
                        <clipPath id="clip0_208_2">
                            <rect width="24" height="24" fill="white" transform="matrix(1 0 0 -1 0 24)" />
                        </clipPath>
                    </defs>
                </svg>
            </button>
            <button class="product-item__play-btn" title="Play a sample">
                <svg width="84" height="84" viewBox="0 0 84 84" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 84V0L78.75 42L5.25 84Z" fill="#FBFFFE"/>
                </svg>                
            </button>
            <img [src]="product.image" [alt]="product.altimg" class="img-fluid">
        </div>
        <div class="product-item__info">
            <h3 class="product-item__title">{{ product.name }}</h3>
            <ul class="product-item__tags">
                <li *ngFor="let tag of product.tags">
                    {{ tag }}
                </li>
            </ul>
            <hr />
            <button class="add-cart-btn" (click)="onSelectProduct(product)">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.25 15C6.94036 15 7.5 15.5597 7.5 16.25C7.5 16.9403 6.94036 17.5 6.25 17.5C5.55964 17.5 5 16.9403 5 16.25C5 15.5597 5.55964 15 6.25 15Z" stroke="#FBFFFE" stroke-width="0.875"/>
                    <path d="M13.75 15.0001C14.4403 15.0001 15 15.5597 15 16.2501C15 16.9405 14.4403 17.5001 13.75 17.5001C13.0597 17.5001 12.5 16.9405 12.5 16.2501C12.5 15.5597 13.0597 15.0001 13.75 15.0001Z" stroke="#FBFFFE" stroke-width="0.875"/>
                    <path d="M1.87397 1.91043C1.54833 1.79594 1.19154 1.96711 1.07706 2.29275C0.962564 2.61839 1.13374 2.97518 1.45937 3.08966L1.87397 1.91043ZM17.2148 8.23567L17.8269 8.36188L17.8278 8.35805L17.2148 8.23567ZM4.75674 8.13338V5.86535H3.50674V8.13338H4.75674ZM2.09165 1.98695L1.87397 1.91043L1.45937 3.08966L1.67705 3.1662L2.09165 1.98695ZM9.11459 13.5417H13.5337V12.2917H9.11459V13.5417ZM4.75674 5.86535C4.75674 5.27605 4.75759 4.7843 4.71433 4.38469C4.66955 3.97104 4.57255 3.59377 4.33756 3.2499L3.30551 3.95515C3.38073 4.06523 3.43881 4.21641 3.47159 4.5192C3.50589 4.83605 3.50674 5.24872 3.50674 5.86535H4.75674ZM1.67705 3.1662C2.23339 3.3618 2.59901 3.49142 2.86806 3.62343C3.12074 3.74741 3.23213 3.84777 3.30551 3.95515L4.33756 3.2499C4.10075 2.90335 3.78587 2.6814 3.41868 2.50124C3.06783 2.32909 2.61996 2.1727 2.09165 1.98695L1.67705 3.1662ZM3.50674 8.13338C3.50674 9.3438 3.5181 10.2166 3.6323 10.8835C3.75424 11.5954 3.99769 12.1051 4.45288 12.5852L5.35999 11.7252C5.09319 11.4438 4.94928 11.1682 4.86436 10.6725C4.77173 10.1315 4.75674 9.37421 4.75674 8.13338H3.50674ZM9.11459 12.2917C7.93391 12.2917 7.1147 12.2902 6.49747 12.2027C5.9018 12.1182 5.5871 11.9647 5.35999 11.7252L4.45288 12.5852C4.94776 13.1072 5.5751 13.3345 6.32197 13.4403C7.04729 13.5432 7.97113 13.5417 9.11459 13.5417V12.2917ZM4.13174 5.72505H14.2407V4.47505H4.13174V5.72505ZM16.6027 8.1095L16.1863 10.1301L17.4105 10.3825L17.8269 8.36188L16.6027 8.1095ZM14.2407 5.72505C14.9543 5.72505 15.5824 5.72588 16.0781 5.78129C16.3244 5.80882 16.5088 5.84707 16.6383 5.89259C16.7728 5.93985 16.7942 5.9761 16.7834 5.96204L17.7742 5.19986C17.5783 4.94535 17.303 4.80125 17.0527 4.71327C16.7973 4.62353 16.5084 4.5716 16.217 4.53903C15.6372 4.47421 14.9312 4.47505 14.2407 4.47505V5.72505ZM17.8278 8.35805C17.9688 7.65144 18.0885 7.05858 18.1178 6.5837C18.1479 6.0952 18.0923 5.61352 17.7742 5.19986L16.7834 5.96204C16.8351 6.02928 16.8922 6.15035 16.8702 6.50669C16.8473 6.87664 16.7502 7.3707 16.6019 8.11334L17.8278 8.35805ZM13.5337 13.5417C14.1684 13.5417 14.7011 13.5428 15.1305 13.4902C15.5769 13.4356 15.9841 13.3162 16.3395 13.0265L15.5498 12.0575C15.4455 12.1425 15.2976 12.2105 14.9787 12.2495C14.6427 12.2906 14.1998 12.2917 13.5337 12.2917V13.5417ZM16.1863 10.1301C16.0518 10.7825 15.9613 11.2161 15.8532 11.5369C15.7506 11.8413 15.6542 11.9725 15.5498 12.0575L16.3395 13.0265C16.6949 12.7369 16.8941 12.3622 17.0378 11.936C17.1759 11.526 17.2823 11.0041 17.4105 10.3825L16.1863 10.1301Z" fill="#FBFFFE"/>
                    <path d="M10.8334 10.8333V9.16667M10.8334 9.16667V7.5M10.8334 9.16667H12.5001M10.8334 9.16667H9.16675" stroke="#FBFFFE" stroke-width="0.875" stroke-linecap="round"/>
                </svg>
                <span>ADD TO CART ${{ product.price }}</span>               
            </button>             
        </div>
    </div>
    <!-- Modal of each product -->
    <div class="modal fade modal-product" [id]="'productModal--' + product.id" tabindex="-1" [attr.aria-labelledby]="'#productModalLabel--' + product.id" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-fullscreen-lg-down">
            <div class="modal-content">
                <button type="button" class="close-modal" data-bs-dismiss="modal" aria-label="Close">
                    <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 1L27 27" stroke="#DD6031" stroke-width="2"/>
                        <path d="M1 27L27 1" stroke="#DD6031" stroke-width="2"/>
                    </svg>                        
                </button>
                <div class="modal-body">
                    <div class="container p-0">
                        <div class="row">
                            <div class="col-12 col-md-6">
                                <div class="product__main-img">
                                    <img [src]="product.image" [alt]="product.altimg" class="img-fluid">
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="product__extra-info">
                                    <h2>{{ product.name }}</h2>
                                    <ul class="tags">
                                        <li *ngFor="let tag of product.tags">
                                            {{ tag }}
                                        </li>
                                    </ul>
                                    <h3 class="main-price">${{ product.price }}</h3>
                                    <button class="add-cart-btn" data-bs-dismiss="modal" (click)="onSelectProduct(product)">
                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6.25 15C6.94036 15 7.5 15.5597 7.5 16.25C7.5 16.9403 6.94036 17.5 6.25 17.5C5.55964 17.5 5 16.9403 5 16.25C5 15.5597 5.55964 15 6.25 15Z" stroke="#FBFFFE" stroke-width="0.875"/>
                                            <path d="M13.75 15.0001C14.4403 15.0001 15 15.5597 15 16.2501C15 16.9405 14.4403 17.5001 13.75 17.5001C13.0597 17.5001 12.5 16.9405 12.5 16.2501C12.5 15.5597 13.0597 15.0001 13.75 15.0001Z" stroke="#FBFFFE" stroke-width="0.875"/>
                                            <path d="M1.87397 1.91043C1.54833 1.79594 1.19154 1.96711 1.07706 2.29275C0.962564 2.61839 1.13374 2.97518 1.45937 3.08966L1.87397 1.91043ZM17.2148 8.23567L17.8269 8.36188L17.8278 8.35805L17.2148 8.23567ZM4.75674 8.13338V5.86535H3.50674V8.13338H4.75674ZM2.09165 1.98695L1.87397 1.91043L1.45937 3.08966L1.67705 3.1662L2.09165 1.98695ZM9.11459 13.5417H13.5337V12.2917H9.11459V13.5417ZM4.75674 5.86535C4.75674 5.27605 4.75759 4.7843 4.71433 4.38469C4.66955 3.97104 4.57255 3.59377 4.33756 3.2499L3.30551 3.95515C3.38073 4.06523 3.43881 4.21641 3.47159 4.5192C3.50589 4.83605 3.50674 5.24872 3.50674 5.86535H4.75674ZM1.67705 3.1662C2.23339 3.3618 2.59901 3.49142 2.86806 3.62343C3.12074 3.74741 3.23213 3.84777 3.30551 3.95515L4.33756 3.2499C4.10075 2.90335 3.78587 2.6814 3.41868 2.50124C3.06783 2.32909 2.61996 2.1727 2.09165 1.98695L1.67705 3.1662ZM3.50674 8.13338C3.50674 9.3438 3.5181 10.2166 3.6323 10.8835C3.75424 11.5954 3.99769 12.1051 4.45288 12.5852L5.35999 11.7252C5.09319 11.4438 4.94928 11.1682 4.86436 10.6725C4.77173 10.1315 4.75674 9.37421 4.75674 8.13338H3.50674ZM9.11459 12.2917C7.93391 12.2917 7.1147 12.2902 6.49747 12.2027C5.9018 12.1182 5.5871 11.9647 5.35999 11.7252L4.45288 12.5852C4.94776 13.1072 5.5751 13.3345 6.32197 13.4403C7.04729 13.5432 7.97113 13.5417 9.11459 13.5417V12.2917ZM4.13174 5.72505H14.2407V4.47505H4.13174V5.72505ZM16.6027 8.1095L16.1863 10.1301L17.4105 10.3825L17.8269 8.36188L16.6027 8.1095ZM14.2407 5.72505C14.9543 5.72505 15.5824 5.72588 16.0781 5.78129C16.3244 5.80882 16.5088 5.84707 16.6383 5.89259C16.7728 5.93985 16.7942 5.9761 16.7834 5.96204L17.7742 5.19986C17.5783 4.94535 17.303 4.80125 17.0527 4.71327C16.7973 4.62353 16.5084 4.5716 16.217 4.53903C15.6372 4.47421 14.9312 4.47505 14.2407 4.47505V5.72505ZM17.8278 8.35805C17.9688 7.65144 18.0885 7.05858 18.1178 6.5837C18.1479 6.0952 18.0923 5.61352 17.7742 5.19986L16.7834 5.96204C16.8351 6.02928 16.8922 6.15035 16.8702 6.50669C16.8473 6.87664 16.7502 7.3707 16.6019 8.11334L17.8278 8.35805ZM13.5337 13.5417C14.1684 13.5417 14.7011 13.5428 15.1305 13.4902C15.5769 13.4356 15.9841 13.3162 16.3395 13.0265L15.5498 12.0575C15.4455 12.1425 15.2976 12.2105 14.9787 12.2495C14.6427 12.2906 14.1998 12.2917 13.5337 12.2917V13.5417ZM16.1863 10.1301C16.0518 10.7825 15.9613 11.2161 15.8532 11.5369C15.7506 11.8413 15.6542 11.9725 15.5498 12.0575L16.3395 13.0265C16.6949 12.7369 16.8941 12.3622 17.0378 11.936C17.1759 11.526 17.2823 11.0041 17.4105 10.3825L16.1863 10.1301Z" fill="#FBFFFE"/>
                                            <path d="M10.8334 10.8333V9.16667M10.8334 9.16667V7.5M10.8334 9.16667H12.5001M10.8334 9.16667H9.16675" stroke="#FBFFFE" stroke-width="0.875" stroke-linecap="round"/>
                                        </svg>
                                        <span>ADD TO CART</span>               
                                    </button>
                                    <div class="extra-info__txt">
                                        <span class="text-deco">[記述]</span>
                                        <h4>{{ product.infotitle }}</h4>
                                        <p>{{ product.infopack}}</p>
                                        <ul class="pack-info">
                                            <li *ngFor="let include of product.packincludes">
                                                {{ include }}
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Toast Message -->
    <div [id]="'productToast--' + product.id" class="toast" [class.show]="toastVisibility[product.id]" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <span class="me-auto">Product Added</span>
            <button (click)="dismissToast(product)" type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            <span>You purchased {{ product.name }}</span>
        </div>
    </div>
</div>